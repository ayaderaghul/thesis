<!doctype html>
<html>
<head>
    <style>
     * {
	 box-sizing: border-box;
     }
     body {
	 display: flex;
	 flex-direction: row;
	 font-family: helvetica, arial, sans;
	 padding: 2%;
     }
     a {
	 color: #008eb3;
     }
     header {
	 font-size: 3em;
	 font-weight: bold;
	 text-align: center;
	 background-color: #008eb3;
	 color: white;
	 padding: 2%;
	 margin: 2% 0 2% 0;
     }
     intro {
	 margin: 2%;
     }
     content {
	 display: flex;
	 flex-direction: column;
	 width: 50%;
     }
     svg {
	 width: 80%;
	 height: 330px;
	 margin: 2%;
     }
     col {
	 width: 35%;
     }
     nav {
	 border: 1px dashed #bb8f5b;
	 margin: 5%;
	 padding: 1% 1% 1% 0;
     }
     footer {
	 margin: 3% 0
     }
     ul {
	 list-style: none;
     }
     li {
	 margin: 3%
     }
     a {
	 color: #008eb3;
	 text-decoration: none;
     }
     a:hover {
	 text-decoration: underline;
     }
     button:hover {
	 background-color: #f4656d;
     }
     rect {
	 fill:ghostwhite;
	 stroke-width:1;
	 stroke:#a7e5e0;
	 opacity: 0.8;
     }
     line {
	 stroke:#a7e5e0;stroke-width:1
     }
     text {
	 font-size: 1.5em;
	 font-weight: bold;
     }
     courtesy {
	 font-color: #bb8f5b
     }
     button {
	 background-color: #e4dbbe;
	 padding: 1% 2%;
	 margin: 2px;
	 border: none;
     }
     table {
	 width: 60%;
	 margin: 5% 20%
     }
     table, th, td {	 
	 text-align:center;
	 border-collapse: collapse;
	 border: 1px solid black;	 
     }
     .game {
	 background-color: ghostwhite;
	 padding: 2% 2%;
	 display: inline-block;
	 border-radius: 10px;
     }
     .game1 {
	 color:#f4656d;
	 font-size:2vw;	 
     }
     .game2 {
	 font-size: 2vw;
	 color:#008eb3;
     }
     .ans {
	 color: #008eb3;
     }
    </style>
</head>
<body>

    <div class="content">
	
	<header>Strategy Representation</header>
	<div class="intro"> 	
	    
	    <p>
In this project we would use finite state machine to represent a strategy. The best way to explain that is to use an example.
	    </p>
	    
	    <div>  <p class="cap" style="display: inline">
		Here is the payoff matrix of the game.
	    </p></div>
	</div>
	<div class="frame">
	    <svg>
		<rect x="5%" y="20" width="30%" height="80"/>
		<rect x="35%" y="20" width="30%" height="80"/>
		<rect x="65%" y="20" width="30%" height="80"/>
		
		<line x1="5%" y1="20" x2="35%" y2="100"/> 
		
		<rect x="5%" y="100" width="30%" height="80"/>
		<rect x="35%" y="100" width="30%" height="80"/>
		<rect x="65%" y="100" width="30%" height="80"/>
		
		<rect x="5%" y="180" width="30%" height="80"/>
		<rect x="35%" y="180" width="30%" height="80"/>
		<rect x="65%" y="180" width="30%" height="80"/>

		<text x="25%" y="50" fill="#f4656d" opacity="1">P2</text>
		<text x="10%" y="70" fill="#008eb3" opacity="1">P1</text>
		<text class="full p1 p2 p1c" x="42%" y="50" fill="#f4656d" opacity="1">Cooperate</text>
		<text class="full p1 p2 p1d" x="73%" y="50" fill="#f4656d" opacity="1">Defect</text>
		<text class="full p1 p2 p2c" x="10%" y="150" fill="#008eb3" opacity="1">Cooperate</text>
		<text class="full p1 p1c p1n" x="45%" y="150" fill="#008eb3" opacity="1">3</text>
		<text class="full p2 p2n p2c" x="55%" y="150" fill="#f4656d" opacity="1">3</text>
		<text class="full p1 p1d p1n" x="75%" y="150" fill="#008eb3" opacity="1">0</text>
		<text class="full p2 p2n p2c" x="85%" y="150" fill="#f4656d" opacity="1">4</text>
		<text class="fulls p2c p2cs" x="90%" y="150" fill="#f4656d" opacity="0">*</text>
		<text class="full p1 p2 p2d" x="10%" y="230" fill="#008eb3" opacity="1">Defect</text>
		<text class="fulls p1cs p1c" x="40%" y="230" fill="#008eb3" opacity="0">*</text>
		<text class="full p1 p1c p1n" x="45%" y="230" fill="#008eb3" opacity="1">4</text>
		<text  class="full p2 p2n p2d" x="55%" y="230" fill="#f4656d" opacity="1">0</text>
		<text class="fulls p1d p1ds p1n" x="70%" y="230" fill="#008eb3" opacity="0">*</text>  
		<text class="full p1 p1d p1n" x="75%" y="230" fill="#008eb3" opacity="1">1</text>
		<text class="full p2 p2n p2d"  x="85%" y="230" fill="#f4656d" opacity="1">1</text>
		<text class="fulls p2d p2ds"  x="90%" y="230" fill="#f4656d" opacity="0">*</text>
	    </svg>
	</div>

	<script>
	 function onoff(element, value) {
	     let o = parseFloat(element.getAttributeNS(null, 'opacity'));
	     element.setAttributeNS(null, 'opacity', value);
	 }
	 function narrate(str, chan) {
	     document.querySelector(chan).innerHTML = str
	 };
	 function select(classtr) {
	     return document.querySelector(classtr);
	 }
	 function selectAll(classtr) {
	     return document.querySelectorAll(classtr);
	 }

	 function step(classtr, value, message, chan) {
	     s = select(classtr);
	     onoff(s, value);
	     narrate(message, chan);
	 }
	 function steps(classtr, value, message, chan) {
	     s = selectAll(classtr);
	     s.forEach(function(element) {onoff(element, value)});
	     narrate(message, chan);
	 }
	 

	 function step0() {
	     steps("*.coop", "0", "", "span.ncoop");
	 }
	 function step1() {
	     step("circle.initstate", "1", "The circle with thick border is the initial state. This machine has only one circle hence only one state which is also the initial state.", "span.ncoop");
	 }
	 function step2() {
	     step("text.initact", "1", "The letter C means that in this state the machine would play Cooperate.", "span.ncoop")
	 }
	 function step3() {
	     steps("*.arrow", "1", "The arrow points to the next state that the machine would switch to from this current state. In this case, the arrow points to the same circle hence the machine stays in this state in the next move.", "span.ncoop")
	 }
	 function step4() {
	     step("text.ctit", "1", "", "span.ncoop");
	     step("text.other", "1", "The letters on the arrow are the action of the other player. In this case, both the actions C and D of the other player triggers the same reaction from this machine: it stays in the same state of playing Cooperate. This one is therefore called the cooperator.", "span.ncoop")
	 }

	 function settored(element, where) {
	     element.setAttributeNS(null, where, "#f4656d");
	 }
	 function tored(element) {
	     if (element.tagName == "circle") {
		 settored(element, 'stroke');
	     }
	     if (element.tagName == "text") {
		 settored(element, 'fill');
	     }
	     if (element.tagName == "polygon") {
		 element.style = "fill:#f4656d";
	     }
	 }
	 function step5() {
	     tored(select("circle.arrow"));
	     tored(select("circle.initstate"));
	     tored(select("polygon.arrow"));
	     tored(select("text.initact"));
	     tored(select("text.other"));
//	     settored(select("circle.arrow"), 'stroke');
	     select("text.initact").innerHTML="D";
	     step("text.dtit", "1", "", "span.ncoop");
	     narrate("Here is another machine. The only difference is that this one plays Defect forever.", "span.ncoop");
	 }
	 function step6() {
	     steps("text.result", "1", "If we match these two together, one would play C forever, the other would play D forever, regardless of whatever their opponent does", "span.ncoop");
	 }
	 
	</script>
	
	<strong> Click 0 to reset. Click the numeric buttons to go through this section. </strong> <br>
	<span> <button type="button" onclick="step0()">0</button><button type="button" onclick="step1()">1</button><button type="button" onclick="step2()">2</button><button type="button" onclick="step3()">3</button><button type="button" onclick="step4()">4</button><button type="button" onclick="step5()">5</button><button type="button" onclick="step6()">6</button></span>
	<p> >	<span class="ncoop"> We have here the first machine </span></p>
	
	<svg height="450">
	    <circle cx="150" cy="100" r="40" stroke="#008eb3" stroke-width="3" fill="white"/>
	    <circle cx="150" cy="150" r="40" stroke="#008eb3" stroke-width="5" fill="ghostwhite"/>
	    <text x="150" y="150" fill="#008eb3" >C</text>

	    <polygon points="180,110 195,120 177,127" style="fill:#008eb3" />
	    <text x="150" y="50" fill="#008eb3" >C, D</text>
	    <text class="coop ctit" x="80" y="250" fill="#008eb3" opacity="0"> The Cooperator </text>


	    <circle class="coop arrow" cx="350" cy="100" r="40" stroke="#008eb3" stroke-width="3" fill="white" opacity="0" />
	    <circle class="coop initstate" cx="350" cy="150" r="40" stroke="#008eb3" stroke-width="5" fill="ghostwhite" opacity="0" />
	    <text class="coop initact" x="350" y="150" fill="#008eb3" opacity="0">C</text>

	    <polygon class="coop arrow" points="380,110 395,120 377,127" style="fill:#008eb3" opacity="0" />
	    <text class="coop other" x="350" y="50" fill="#008eb3" opacity="0">C, D</text>
	    <text class="coop dtit" x="280" y="250" fill="#f4656b" opacity="0"> The Defector </text>

	    <text class="coop result" x="150" y="300" fill="#008eb3" opacity="0"> Cooperator:  C C C C C C C ... </text>
	    <text class="coop result" x="150" y="330" fill="#f4656b" opacity="0"> Defector:  D D D D D D D ...</text>
	    
	</svg>

	<script>
	 function s0() {
	     steps("*.full", "1", "", "span.message");
	 }
	 function s1() {
	     steps("*.full", "0", "", "span.message");
	     step("circle.init", 1, "Here is the initial state of the machine.", "span.message");
	 }
	 function s2() {
	     step("text.initc", "1", "In this initial state, the machine plays C. Which means that it starts out to be nice.", "span.message");
	 }
	 function s3() {
	     steps("*.arrowc", 1, "If the other player plays C, it continues to stay in the same state of playing C.", "span.message");
	 }
	 function s4() {
	 steps("*.arrowd", 1, "If the other player plays D, it switches to the state of playing D.", "span.message");
	 }
	 function s5() {
	 steps("*.arrowd2", 1, "From the state of playing D, if the other player continues to defect, it continues to defect also.", "span.message")
	 }
	 function s6() {
	 steps("*.arrowc2", 1, "However, if the other player plays C, it also reverts to the state of playing C. It forgives, <i>sort of</i>.", "span.message")
	 }
	 function s7() {
	 steps("*.coer", 1, "If you match Tit for Tat with the Cooperator, they would play Cooperate forever. Do you know why?", "span.message");
	 }
	 function changehtml(classtr, str) {
	     select(classtr).innerHTML = str;
	 }
	 function s8() {
	     es = selectAll("*.defector");
	     es.forEach(function (element) {tored(element)});
	     changehtml("text.defact", "D");
	     changehtml("text.deftit", "The Defector");
	     changehtml("text.defres", "Defector: D D D D D D D ...");
	     narrate("If you match Tit for Tat with the Defector, TFT learns to play Defect afterward. Why?", "span.message");
	 }
	</script>
	<br>
	<strong> Click 0 to reset. Click the numeric buttons to go through this section. </strong> <br>
	<span> <button type="button" onclick="s0()">0</button><button type="button" onclick="s1()">1</button><button type="button" onclick="s2()">2</button><button type="button" onclick="s3()">3</button><button type="button" onclick="s4()">4</button><button type="button" onclick="s5()">5</button><button type="button" onclick="s6()">6</button><button type="button" onclick="s7()">7</button><button type="button" onclick="s8()">8</button></span>
	  <p> Let's get acquainted to two other classic machines. </p>
	  <p> > <span class="message"> </span></p>
	  <svg>
	      <circle class="full arrowc" cx="150" cy="100" r="40" stroke="#008eb3" stroke-width="3" fill="white" opacity="1" />
	      <circle class="full init" cx="150" cy="150" r="40" stroke="#008eb3" stroke-width="5" fill="ghostwhite" opacity="1" />
	      <text class="full initc" x="150" y="150" fill="#008eb3" opacity="1" >C</text>
	      <polygon class="full arrowc" points="180,110 195,120 177,127" style="fill:#f4656b" opacity="1" />
	      <text class="full" x="200" y="270" fill="#008eb3" opacity="1"> Tit For Tat </text>
	      <text class="full arrowc" x="150" y="50" fill="#008eb3" opacity="1" >C</text>
	      <text class="full arrowc2" x="250" y="70" fill="#008eb3" opacity="1" >C</text>
	      
	      <path class="full arrowc2" d="M 180 120 q 80 -70 160 20" stroke="#f4656b"
		    stroke-width="3" fill="none" opacity="1" />
	      <path class="full arrowd" d="M 180 180 q 80 70 160 0" stroke="#008eb3"
		    stroke-width="3" fill="none" opacity="1" />
	      <text class="full arrowd" x="250" y="200" fill="#f4656b" opacity="1" >D</text>

	      <circle class="full arrowd2" cx="350" cy="100" r="40" stroke="#f4656b" stroke-width="3" fill="white" opacity="1" />
	      <polygon class="full arrowd2" points="380,110 395,120 377,127" style="fill:#f4656b" opacity="1" />
	      <text class="full arrowd2" x="350" y="50" fill="#f4656b" opacity="1">D</text>
	      
	      <circle class="full arrowd" cx="350" cy="150" r="40" stroke="#f4656b" stroke-width="3" fill="ghostwhite" opacity="1" />
	      <text class="full arrowd" x="350" y="150" fill="#f4656b" opacity="1">D</text>

	      <polygon class="full arrowd" points="310,190 335,185 320,205" style="fill:#008eb3" opacity="1" />



	      	    <circle class="coer defector" cx="550" cy="100" r="40" stroke="#008eb3" stroke-width="3" fill="white" opacity="0" />
	    <circle class="coer defector" cx="550" cy="150" r="40" stroke="#008eb3" stroke-width="5" fill="ghostwhite" opacity="0" />
	    <text class="coer defector defact" x="550" y="150" fill="#008eb3" opacity="0">C</text>

	    <polygon class="coer defector" points="580,110 595,120 577,127" style="fill:#008eb3" opacity="0" />
	    <text class="coer defector" x="550" y="50" fill="#008eb3" opacity="0">C, D</text>
	    <text class="coer defector deftit" x="480" y="250" fill="#008eb3" opacity="0"> The Cooperator </text>

	    <text class="coer" x="150" y="300" fill="#008eb3" opacity="0"> Tit For Tat:  C C C C C C C ... </text>
	    <text class="coer defector defres" x="150" y="330" fill="#008eb3" opacity="0"> Cooperator:  C C C C C C C ...</text>
	    

	      
	      
	  </svg>

	  <p>
	      <strong>
		  Exercise
	      </strong>
	      Can you draw the Grim Trigger based on the following description: It has two states. It starts out to play Cooperate in the initial state. If the other player plays C, it stays in the state of Cooperating. If the other player plays D, it switches to the second state of Defecting. From that state, there is no way back which means that no matter what the other player does, it stays in that same state.
	      
	  </p>
	  <script>
	   function drawgt() {
	       es = selectAll("*.gt");
	       es.forEach(function (e) { onoff(e, 1) });
	       
	   }
	  </script>
	  <button type="button" onclick="drawgt()">Answer</button> <br>
	  <svg>
	      <circle class="gt" cx="150" cy="100" r="40" stroke="#008eb3" stroke-width="3" fill="white" opacity="0" />
	      <circle class="gt" cx="150" cy="150" r="40" stroke="#008eb3" stroke-width="5" fill="ghostwhite" opacity="0" />
	      <text class="gt" x="150" y="150" fill="#008eb3" opacity="0" >C</text>
	      <polygon class="gt" points="180,110 195,120 177,127" style="fill:#008eb3" opacity="0" />
	      <text class="gt" x="200" y="270" fill="#008eb3" opacity="0"> Grim Trigger </text>
	      <text class="gt" x="150" y="50" fill="#008eb3" opacity="0" >C</text>
	      <text class="gt" x="250" y="140" fill="#f4656b" opacity="0" >D</text>
	      <circle class="gt" cx="350" cy="100" r="40" stroke="#f4656b" stroke-width="3" fill="white" opacity="0" />
	      <polygon class="gt" points="380,110 395,120 377,127" style="fill:#f4656b" opacity="0" />
	      <line class="gt" x1="190" y1="150" x2="350" y2="150" style="stroke:#008eb3;stroke-width:3" opacity="0" />
	      <text class="gt" x="350" y="50" fill="#f4656b" opacity="0">C, D</text>
	      
	      <circle class="gt" cx="350" cy="150" r="40" stroke="#f4656b" stroke-width="3" fill="ghostwhite" opacity="0" />
	      <text class="gt" x="350" y="150" fill="#f4656b" opacity="0">D</text>

	      <polygon class="gt" points="300,140 315,150 300,160" style="fill:#008eb3" opacity="0" />
	      
	  </svg><br>

	  <p>
	      <strong> Exercise </strong> Can you match Grim Trigger with other classic machines such as the Cooperator, the Defector and Tit for Tat?
	  </p>
	  <script>
	   function match() {
	       select("p.answer").setAttributeNS(null, 'style', 'font-size:2vw;display:block');
	   }
	  </script>
	  <p>
	      <button type="button" onclick="match()">Answer</button>
	      
	  </p>

	  <p class="answer" style="font-size:2vw;display:none"> <code>
Grim Trigger: C C C ... <br>
	      <span style="color:#008eb3"> The Cooperator: C C C ... </span><br>

Grim Trigger: C D D ... <br>
	      <span style="color: #f4656b"> The Defector: D D D ... </span><br>

Grim Trigger: C C C ... <br>
Tit for Tat: C C C ... <br>
	  </code></p> 
	  
	  <p>
	<strong> Exercise </strong> I give you the Nash Demand Game in which there is 10 euro to be divided between two players. Each player can claim 2, 5 or 8 out of 10 which is equivalent to a Low, Medium or High portion of the pie, if the prize is ever interpreted as a pie. If the two claims sum up to be less than or equal 10, each gets what they wants, otherwise both get zero. 
	</p>
	<table style="font-size:2vw">
	    <tr>
		<th>P1 \ P2 </th>
		<th>Low</th>
		<th>Medium</th>
		<th> High  </th>
	    </tr>
	    <tr>
		<td>Low</td>
		<td>2 2</td>
		<td>2 5</td>
		<td class="ne"> 2 8 </td>
	    </tr>
	    <tr>
		<td>Medium</td>
		<td>5 2</td>
		<td class="ne">5 5</td>
		<td> 0 0 </td>
	    </tr>
	    <tr>
		<td> High </td>
		<td class="ne"> 8 2 </td>
		<td> 0 0 </td>
		<td> 0 0 </td>
	    </tr>
	</table>

	<p> Can you use finite state machines to represent strategies in the repeated NDG? Can you draw the classic machines of this game? Can you match them together and write the payoff sequence resulting from the match?</p>
	<button type="button" onclick="colorne()">Answer</button>
	<p> > <span class="ans">  </span></p>
	<script>
	 
	</script>


	<footer>
	  <a href ="gitlab.com/ayaderaghul/thesis"> Gitlab Project </a> | Made with <span style="color:#f4656d">&#9829;</span> | <a href="github.com/ayaderaghul" style="color:#bb8f5b">Aya de Ragh≈©l</a> | <img src="mint.jpg" width="2%">
	</footer>

    </div>
    <div class="col">
    <nav>
	<ul>
	  <li> <a href="intro.html"> Introduction </a> </li>
	  <li> <a href="game.html"> The Game </a> </li>
	  <li> <a href="repeated.html"> The Repeated Game</a> </li>
	  <li> <a href="representation.html"> Strategy Representation </a></li>
	  <li> <a href="cycle.html"> Simulation Cycle </a></li>
	  <li> <a href="fitness.html"> Fitness Calculation </a></li>
	  <li> <a href="run.html"> Run </a></li>
	  <img src="damascus.jpg" width="90%">
	  <span style="color:#bb8f5b">courtesy: c.hi</span>
	</ul>
    </nav>
	  </div>


</body>
</html>
